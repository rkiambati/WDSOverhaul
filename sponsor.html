<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sponsor interest — WDS Externals</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body class="day">
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="index.html">W<span>DS</span></a>
      <nav class="links">
        <a href="index.html#about">About</a>
        <a href="index.html#testimonials">Testimonials</a>
        <a href="index.html#sponsors">Sponsors</a>
        <a href="index.html#faq">FAQ</a>
      </nav>
    </div>
    <div class="progress"><span id="progress-bar"></span></div>
  </header>

  <section class="hero hero-slim">
    <div class="sky">
      <div class="sun"></div>
      <div class="cloud c1"></div>
      <div class="cloud c2"></div>
      <div class="sparkles" id="faq-stars"></div>
    </div>
    <div class="container hero-inner">
      <h1>Sponsor the hackathon</h1>
      <p class="subtitle">Support devs on campus and recruit early.</p>
    </div>
    <div class="wave wave-bottom wave-to-water" aria-hidden="true"></div>
  </section>

  <section class="section water-to-grass">
    <div class="container form-wrap">
      <form id="sponsor-form" class="card form-card">
        <div class="grid-2">
          <label>Name<input name="name" required /></label>
          <label>Email<input name="email" type="email" required /></label>
          <label>Company<input name="company" required /></label>
          <label>Role/Team<input name="role" /></label>
          <label>Budget<select name="budget"><option>Undisclosed</option><option>&lt; $1k</option><option>$1k–$5k</option><option>$5k–$10k</option><option>$10k+</option></select></label>
          <label>Hiring focus<select name="hiring"><option>Interns</option><option>New grads</option><option>Both</option><option>Not hiring</option></select></label>
        </div>
        <label>Message<textarea name="message" rows="3" placeholder="Tell us what you’d like to do with us…"></textarea></label>
        <label class="agree"><input type="checkbox" name="consent" required /> I agree to be contacted about sponsorship.</label>
        <button class="btn btn-peach magnet" type="submit">Send</button>
        <div class="success" id="sp-success" hidden>Thanks — we’ll reach out shortly.</div>
      </form>
    </div>
  </section>

  <footer class="footer">
    <div class="container small">© WDS Externals</div>
  </footer>
  <script src="assets/forms.js" defer></script>
  <script src="assets/main.js" defer></script>
 <script>
  // Small helper to POST JSON and throw on non-2xx
  async function postJSON(url, payload){
    const r = await fetch(url, {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify(payload)
    });
    let j = null; try { j = await r.json(); } catch(e){}
    if (!r.ok) throw new Error((j && j.error) || `HTTP ${r.status}`);
    return j || { ok:true };
  }

  const f  = document.getElementById('sponsor-form');
  const ok = document.getElementById('sp-success');

  f.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Read the form exactly as your HTML names it
    const fd = new FormData(f);
    const data = Object.fromEntries(fd.entries());

    // Map current field names -> what the API expects
    const payload = {
      kind: "sponsor",
      data: {
        org:       (data.company || "").trim(),   // ← backend expects `org`
        name:      (data.name || "").trim(),
        email:     (data.email || "").trim(),
        phone:     (data.phone || "").trim(),
        subject:   (data.subject || "").trim(),
        message:   (data.message || "").trim(),
        budget:    data.budget || "Undisclosed",
        interests: data.hiring || "",             // reuse Hiring focus as “interests” if you want
        // optional honeypot if you add one later: honey: data.honey || ""
      }
    };

    try {
      await postJSON("/api/submit", payload);
      f.reset();
      ok.hidden = false;
      // optionally hide again after a moment
      setTimeout(() => ok.hidden = true, 3500);
    } catch (err) {
      // Show the error so you can see what's wrong if any
      alert("Could not submit (sponsor): " + err.message);
      console.error(err);
    }
  });
</script>

</body>
</html>
